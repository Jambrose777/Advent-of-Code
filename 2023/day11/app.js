const start = Date.now();
const input = `..........#............................................#..........#.....#...........................................#.......#.........#.....
.....#...................#..............#....................................................#..............................................
..............................#....................#...................................................#....................................
.............................................#.....................................................................................#........
............#................................................................#......#.......................................................
......................................#..................#.........................................#........................................
.............................................................................................................................#..............
.................#.....#....................................................................................................................
.....................................................#...........#..........................................#.............................#.
.....#..........................#...............#.......................................#...........................#.......................
....................#................#...............................#.........................#.....#......................................
...........#.............................................#..................................................................................
................................................................................................................................#.....#.....
................#...................................#...........#......................................................#....................
.........................#.................................................#.................................#.............................#
...#..............................#...................................#................................#....................................
...............................................................................#............................................................
..................................................................#...........................#..........................#........#.........
.........#....................#........................................................................................................#....
..........................................................................#..............#........................#.........................
....................#...............................#........#..............................................................................
..#..............................#........#...................................#..........................#..................#...............
......................................................................#...........................#............#...................#........
........#................#..............................#.............................................................#.................#...
......................................#......#....................#........#.....#.........#................................................
.....................#............................#.............................................................................#...........
....#.........................#.............................................................................#...............................
............#..................................................#................................#...........................#...............
....................................................................................#..................#.............#......................
..........................................................................................................................................#.
...................................#...............#.....................................#.......................#..........................
..#................#.......................#................................................................................................
...........#...............#...........................................#.................................................#.........#........
......#.....................................................................#............................#..................................
.........................................................#..................................................................................
...................................................................#........................................................................
.........#....................................................#......................................#............#....................#....
...................................................#....................#...........#......................#...............#................
..#..............................#......#........................................................#..........................................
........................................................#...........................................................................#.......
......................................................................................................................#.....................
......#......................................................................#................#.............................................
............................................#..............#............................................#...................#...............
.......................#........#......#........................#..................................................#........................
....................................................#......................................#.......#.........#..............................
........#..........................................................................................................................#........
................#...........................................................................................................................
#..........................#.......#......#.............................#.................................#.................................
......................................................#.............................#............#.......................#.....#............
...................#.............................................#...........#...........#..............................................#...
...............................#..................#..........................................................#..............................
..............#..............................................#.......................................#......................................
..#.....................#.............#........................................................#............................................
...................................................................#........................................................................
............................................................................................................................................
........#.......#.....................................................................#.....................................................
...............................#.....................#..................#.....................................#.........#...................
..............................................#...............................#............#........#.......................................
.#.................#........................................................................................................................
..................................#................................................#.....................................................#..
............................................................................................................................................
...........#..................#....................#....................................#...................................................
....#....................................#.........................#.....#......................#...............#..............#............
.................................................................................#..........................................................
...............................................#........................................................#...........#.....................#.
........................#........#.........................#................................................................................
....................................................................................#..............................................#........
...#......................................#.................................................................................................
.....................................................#.........................................#......#.........#...........................
..............................#..........................................................#.................#................#...............
..............#....................................................#......#.................................................................
........#............#..........................................................................................................#...........
............................................................................................................................................
...........................#.....................#..............#..................................#................................#.......
............................................................................#...............................................................
.............................................#..........................................................#.................................#.
.....................................................#..............#.......................................................................
......#................#................#..................#.................................................#...........#..................
................#.................#......................................#........................................#...........#.............
...........#....................................#................#..........................#......................................#........
............................................................................................................................................
...................#..................................#.....................................................................................
...#.......................#..............#.................#..............#..........#...................................................#.
......................................................................................................#................#.............#......
....................................................................#............................#..............................#...........
...............................#..................#.......................................#...............#................#................
............................................................................................................................................
............................................................................................................................................
......................#...............................#..........#.............................................#...................#........
........................................#..............................................................#.................#..................
..........................#........#.......................................#..........#....................................................#
..................#...........................#.............................................................................................
......#....................................................#...............................#................................................
..............................#.............................................................................................................
................................................................................................#........#..................................
#.............#.......................................................#........#...............................................#.......#....
...........................#...................................................................................#............................
....#...................................#...................................................................................................
................................................#......#..................................................................................#.
.......................................................................................#.............#......................................
................................#..........................#..................#...........................#.................................
....................#...........................................................................................#...................#.......
...................................................#..............#.......#............................................#....................
..#.........................................................................................................................................
........#.....#.......................#.......#..............................................................................#..............
......................#.......#.........................#........................#...........#.......#...................................#..
...............................................................................................................#............................
.......................................................................................#..................#.................................
........................................................................#.........................#..................#......................
..........................................#.....#.........................................................................#.................
..................#..........#...............................#..............................................................................
......................................#........................................#.........#..................................................
...#...............................................................................................................#....................#...
........#..............................................#...............#.....................................................#..............
...................................#........................................#...............#............#..........................#.......
............#.................#.............................................................................................................
....................#.............................#.........................................................................................
....................................................................................#..............#........................................
...............#......................................#.......................................#.........................................#...
.#........................#........................................#...............................................#......#.................
........................................#.................................................#.................................................
.....#...................................................................#..................................................................
..................................................................................................#............#............................
............#.......#.........#.....#...............#.......#...........................................#...................................
..#..........................................#......................#..................#...............................................#....
............................................................................................................................................
.........................#.............#....................................................................................................
..................................................#............................#................................#...................#.......
...................................#..............................................................#......#..................................
............................................................................................................................................
........................................................#.....#............................#..........................#.....#...............
......................#.......................#..........................#.............................................................#....
......#.....#.........................................................................................#.....................................
..................................................................#...............................................................#.........
...................................#.........................................#.................#..........................#...............#.
..#.........................................#.........................#..............#......................................................
...................................................#......................................#...................#.............................
.........................................................#..................................................................................
..............#................................................#..................................#.........................................
...................#..........#..........#................................................................#......#............#............#`

let universe = input.split('\n').map(row => row.split(""));

let expandedRows = [];
let expandedCols = [];

// get expanded rows list
for(let i = 0; i < universe.length; i++) {
  if(universe[i].reduce((agg, entry) => entry === '.' && agg, true)) {
    expandedRows.push(i)
  }
}

// get expanded columns list
for(let i = 0; i < universe[0].length; i++) {
  let columnIsAll0 = true;
  for(let j = 0; j < universe.length; j++) {
    if(universe[j][i] !== '.') {
      columnIsAll0 = false;
    }
  }
  if(columnIsAll0) {
    expandedCols.push(i);
  }
}

// find all galaxy coordinates
let galaxies = []
for(let i = 0; i < universe.length; i++) {
  for(let j = 0; j < universe[0].length; j++) {
    if(universe[i][j] === '#') {
      galaxies.push({i, j})
    }
  }
}

// Modified Manhattan Distance
let expansionLength = 1000000;
function getLength(coor1, coor2) {
  let length = Math.abs((coor2.i - coor1.i)) + Math.abs((coor2.j - coor1.j));
  expandedRows.forEach(row => {
    if((coor2.i < row && row < coor1.i) || (coor2.i > row && row > coor1.i)) {
      length += expansionLength - 1
    }
  })
  expandedCols.forEach(col => {
    if((coor2.j < col && col < coor1.j) || (coor2.j > col && col > coor1.j)) {
      length += expansionLength - 1
    }
  })
  return length
}

// sum each of the galaxies Manhattan Distances from one another
let sum = 0;
for(let k = 0; k < galaxies.length; k++) {
  for(let m = k+1; m < galaxies.length; m++) {
    sum += getLength(galaxies[k], galaxies[m])
  }
}

console.log(sum)

console.log(`Execution time: ${(Date.now() - start)/1000}s`);
